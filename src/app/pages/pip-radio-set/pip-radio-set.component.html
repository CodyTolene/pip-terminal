<main>
  <section>
    <h2>Radio Set</h2>
    <p>
      This page allows you to upload custom WAV files to your Pip-Boy's radio
      system. Once connected to the device, you can override the default radio
      tracks with your own selections, giving you full control over the
      soundtrack that plays during your wasteland adventures.
    </p>
    <p>
      Music must be converted to a specific format before it can be played on
      the device. For more information on compatible audio, check out the
      documentation here from <strong>RobCo Industries</strong> website
      <a
        href="https://log.robco-industries.org/documentation/pipboy-3000/#audio"
        target="_blank"
      >
        here</a
      >.
    </p>
    <pip-actions-primary />
    <pip-actions-misc hideDeleteAllAppsButton />
  </section>
  <section>
    <h3>Radio Host Files - Upload WAV Files (DX01 - DX03)</h3>
    <div
      *ngFor="let name of dxFileNames; let i = index"
      class="upload-container"
    >
      <ng-content
        *ngTemplateOutlet="
          uploadTemplate;
          context: { i, max: dxFileNames.length, name }
        "
      />
    </div>
  </section>
  <section>
    <h3>Radio Music Files - Upload WAV Files (MX01 - MX16)</h3>
    <div
      *ngFor="let name of mxFileNames; let i = index"
      class="upload-container"
    >
      <ng-content
        *ngTemplateOutlet="
          uploadTemplate;
          context: { i, max: mxFileNames.length, name }
        "
      />
    </div>
    <ng-template #uploadTemplate let-i="i" let-max="max" let-name="name">
      <pip-button
        (click)="playRadioFileOnDevice(name)"
        [disabled]="
          !signals.isConnected() ||
          signals.disableAllControls() ||
          signals.isUploadingFile()
        "
        >Play current {{ name }}</pip-button
      >
      <div class="file-upload">
        <label
          [class.disabled]="
            !signals.isConnected() ||
            signals.disableAllControls() ||
            signals.isUploadingFile()
          "
          for="uploadInput-{{ name }}"
        >
          Select WAV File for {{ name }}
        </label>
        <input
          (change)="onUploadFileSelected($event, name)"
          [disabled]="
            !signals.isConnected() ||
            signals.disableAllControls() ||
            signals.isUploadingFile()
          "
          accept=".wav"
          id="uploadInput-{{ name }}"
          type="file"
        />
      </div>
      <pip-button
        (click)="uploadFile(name)"
        [disabled]="
          !uploadFileInputs[name] ||
          !signals.isConnected() ||
          signals.disableAllControls() ||
          signals.isUploadingFile()
        "
      >
        Upload {{ name }}
      </pip-button>
      <div *ngIf="uploadProgress[name] > 0">
        <mat-progress-bar
          mode="determinate"
          [value]="uploadProgress[name]"
        ></mat-progress-bar>
      </div>
    </ng-template>
  </section>
  <section>
    <pip-actions-quick-nav disableRadioSetTab />
  </section>
</main>

<pip-log />
