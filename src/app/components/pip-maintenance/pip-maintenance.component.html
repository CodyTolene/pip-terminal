<main>
  <section>
    <h3>Connection Status</h3>
    <button
      (click)="connect()"
      [disabled]="signals.isConnected() || signals.disableAllControls()"
    >
      Connect
    </button>
    <button
      (click)="restart()"
      [disabled]="!signals.isConnected() || signals.disableAllControls()"
    >
      Restart
    </button>
    <button
      (click)="disconnect()"
      [disabled]="!signals.isConnected() || signals.disableAllControls()"
    >
      Disconnect
    </button>
    <button (click)="goToConnectTab()">Go to Connect Tab</button>
  </section>
  <section>
    <h3>Owner Name</h3>
    <input
      [(ngModel)]="ownerName"
      maxlength="20"
      placeholder="Set Owner"
      [disabled]="!signals.isConnected() || signals.disableAllControls()"
    />
    <button
      (click)="setOwnerName(ownerName)"
      [disabled]="!signals.isConnected() || signals.disableAllControls()"
    >
      Save Owner
    </button>
    <button
      (click)="resetOwnerName()"
      [disabled]="!signals.isConnected() || signals.disableAllControls()"
    >
      Reset Owner
    </button>
  </section>
  <section>
    <h3>Firmware Update</h3>
    <div class="file-upload">
      <label
        [class.disabled]="
          !signals.isConnected() || signals.disableAllControls()
        "
        for="fileInput"
        >Upload File</label
      >
      <input
        (change)="onFileSelected($event)"
        [disabled]="!signals.isConnected() || signals.disableAllControls()"
        accept=".zip"
        id="fileInput"
        type="file"
      />
    </div>
    <button
      (click)="fetchLatestUpdateLinks()"
      [disabled]="signals.disableAllControls()"
    >
      Fetch Links
    </button>
    <button
      (click)="startUpdate()"
      [disabled]="
        !selectedFile || !signals.isConnected() || signals.disableAllControls()
      "
    >
      Start Upgrade
    </button>
    <div *ngIf="signals.updateProgress() > 0">
      <p>Uploading: {{ signals.updateProgress() }}%</p>
      <div class="progress-bar">
        <div
          class="progress-fill"
          [style.width.%]="signals.updateProgress()"
        ></div>
      </div>
    </div>
  </section>
  <section>
    <h3>Date and Time</h3>
    <button
      [disabled]="!signals.isConnected() || signals.disableAllControls()"
      (click)="setDateTimeCurrent()"
    >
      Set to Current
    </button>
  </section>
</main>

<pip-log />
